"use strict";define(function(require,exports,module){var $=require("jquery");require("lib/chinamapPath")(window),require("lib/raphael")(window);var SvgMap=React.createClass({displayName:"SvgMap",raphaelR:null,lastArea:null,lastFont:null,lastOverArea:null,lastOverFont:null,CreatChinaSvg:function(dom){var me=this;me.raphelR=Raphael(dom,"100%",800),paintMap(me.raphelR),me.raphelR.setViewBox(0,0,600,500,!1)},InitChinaSvgDataEvent:function(data,clickFun){var me=this,R=me.raphelR,textAttr={fill:"#170C44","font-size":"12px","font-family":"inherit",cursor:"pointer"};for(var state in china)!function(st,state){function contains(parentNode,childNode){return parentNode.contains?parentNode!=childNode&&parentNode.contains(childNode):!!(16&parentNode.compareDocumentPosition(childNode))}function checkHover(e,target){return"mouseover"==getEvent(e).type?!(contains(target,getEvent(e).relatedTarget||getEvent(e).fromElement)||(getEvent(e).relatedTarget||getEvent(e).fromElement)===target):!(contains(target,getEvent(e).relatedTarget||getEvent(e).toElement)||(getEvent(e).relatedTarget||getEvent(e).toElement)===target)}function getEvent(e){return e||window.event}st.attr({cursor:"pointer"});var xx=st.getBBox().x+st.getBBox().width/2,yy=st.getBBox().y+st.getBBox().height/2;switch(china[state].name){case"江苏":xx+=5,yy-=10;break;case"河北":xx-=10,yy+=20;break;case"天津":xx+=10,yy+=10;break;case"上海":xx+=10;break;case"广东":yy-=10;break;case"澳门":yy+=10;break;case"香港":xx+=20,yy+=5;break;case"甘肃":xx-=40,yy-=30;break;case"陕西":xx+=5,yy+=10;break;case"内蒙古":xx-=15,yy+=65}var val="0";$.each(data,function(index,item){item.province_code==china[state].code&&(val=item.count)}),"undefined"!=typeof china[state].text&&china[state].text.remove(),china[state].text=R.text(xx,yy,china[state].name+"("+val+")").attr(textAttr),st[0].onclick=china[state].text[0].onclick=function(){console.log("click"),me.lastArea&&(me.lastArea.animate({fill:"#f05900",stroke:"#eee","stroke-width":1},1),me.lastFont.animate({"stroke-width":0},1),me.lastArea.toBack(),me.lastFont.toFront()),me.lastArea=st,me.lastFont=china[state].text,st.animate({fill:"#feab0d",stroke:"#FCFCFC","stroke-width":2},300),st.toFront(),china[state].text.animate({stroke:"#60587F","stroke-width":.5},100),china[state].text.toFront(),R.safari(),clickFun&&clickFun(china[state].code)},st[0].onmouseover=china[state].text[0].onmouseover=function(e){e.stopPropagation(),checkHover(e,this)&&(st.animate({fill:"#685C44",stroke:"#FCFCFC","stroke-width":2},3),st.toFront(),china[state].text.animate({stroke:"#60587F","stroke-width":.5},3),china[state].text.toFront(),R.safari())},st[0].onmouseout=china[state].text[0].onmouseout=function(e){checkHover(e,this)&&(e.stopPropagation(),console.log("out"),st.animate({fill:"#f05900",stroke:"#eee","stroke-width":1},1),china[state].text.animate({"stroke-width":0},1),st.toBack(),china[state].text.toFront(),R.safari())}}(china[state].path,state)},componentDidMount:function(){var me=this;console.log(this.refs.svgmap),me.CreatChinaSvg(this.refs.svgmap),me.InitChinaSvgDataEvent({},function(code){console.log(code)})},render:function(){return React.createElement("div",{ref:"svgmap",className:"svgmap"})}});module.exports=SvgMap});