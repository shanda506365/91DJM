"use strict";define(function(require,exports,module){var $=require("jquery");require("lib/bootstrap.min")($),require("js/bootstrapValidator.sea")($),require("js/LoadMask")($);var common=require("js/common"),Navagator=require("js/Navagator"),NavMenu=require("js/NavMenu"),Bottom=require("js/Bottom"),Toolbar=require("js/Toolbar"),Alert=require("js/Alert");require("lib/chinamapPath")(window);var Pay=React.createClass({displayName:"Pay",showAlert:function(){$(this.refs.myModal).modal()},componentDidMount:function(){var me=this;$(".payForm").bootstrapValidator({message:common.regex.fail_text,feedbackIcons:{valid:common.feedbackIcons.valid,invalid:common.feedbackIcons.invalid,validating:common.feedbackIcons.validating}});var form=$(".payForm").data("bootstrapValidator");$(".btn-submit").click(function(){form.isValid()?$.ajax({type:"POST",url:common.createUrl($(".htmlbody").attr("data-ajax-submit")),data:me.state.dataOrder,beforeSend:function(){$(".submit").loadingOverlay()},success:function(data){$(".submit").loadingOverlay("remove"),data.success?window.location.href="/writepayfrom.html":(me.setState({title:"错误",message:data.msg}),me.showAlert())},error:function(XMLHttpRequest,textStatus){$(".submit").loadingOverlay("remove"),me.setState({title:textStatus,message:JSON.stringify(XMLHttpRequest)}),me.showAlert()},dataType:"json"}):document.documentElement.scrollTop=document.body.scrollTop=0})},getInitialState:function(){var dataOrder=JSON.parse($(".htmlbody").attr("data-order"));return{title:"消息",message:"...",dataOrder:dataOrder}},render:function(){var me=this,dataBreadcrumb=JSON.parse($(".htmlbody").attr("data-breadcrumb")),breadcrumbDom=[];$.each(dataBreadcrumb,function(index,item){var cls="";return index==dataBreadcrumb.length-1?(breadcrumbDom.push(React.createElement("li",{className:"leaf"},item.name)),!1):void breadcrumbDom.push(React.createElement("li",null,React.createElement("a",{href:item.link,className:cls},item.name)))});var dataOrder=me.state.dataOrder;return React.createElement("div",null,React.createElement(Navagator,null),React.createElement(NavMenu,{"data-index":"4"}),React.createElement("div",{className:"container pay"},React.createElement("img",{src:"images/A41.jpg",alt:"",className:"banner img-responsive"}),React.createElement("ol",{className:"breadcrumb"},breadcrumbDom),React.createElement("form",{className:"payForm form-horizontal"},React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"col-md-1"},React.createElement("div",{className:"icon"},React.createElement("span",{className:"glyphicon glyphicon-ok"}))),React.createElement("ul",{className:"list-unstyled col-md-11"},React.createElement("li",{className:"title"},"订单已提交，请尽快付款！"),React.createElement("li",null,"充值到帐号：",React.createElement("span",{className:"alipay_seller_email"},dataOrder.alipay_seller_email)," "),React.createElement("li",null,"您的订单号：",React.createElement("span",{className:"order_no"},dataOrder.order_no),"  应付金额：",React.createElement("span",{className:"earnest_money"},dataOrder.earnest_money),"元")))),React.createElement("div",{className:"row title"},"请选择支付方式"),React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs",role:"tablist"},React.createElement("li",{role:"presentation",className:"active"},React.createElement("a",{href:"#home","aria-controls":"threeParty",role:"tab","data-toggle":"tab"},"支付平台"))),React.createElement("div",{className:"tab-content"},React.createElement("div",{role:"tabpanel",className:"tab-pane active",id:"threeParty"},React.createElement("div",{className:"radio"},React.createElement("label",null,React.createElement("input",{type:"radio",name:"payTypeRadios",value:dataOrder.payment_code,checked:!0}),React.createElement("img",{src:"/images/icons/zhifubao.png",alt:dataOrder.payment_method})))))),React.createElement("div",{className:"row text-right"},React.createElement("button",{className:"btn btn-base btn-submit"},"确认并支付")))),React.createElement(Bottom,null),React.createElement(Toolbar,null),React.createElement("div",{className:"modal fade",ref:"myModal",tabIndex:"-1",role:"dialog"},React.createElement(Alert,{title:this.state.title,message:this.state.message})))}});$(function(){ReactDOM.render(React.createElement(Pay,null),$(".htmlbody").get(0))})});