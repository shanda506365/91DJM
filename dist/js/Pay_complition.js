"use strict";define(function(require,exports,module){var $=require("jquery");require("js/LoadMask")($);var common=require("js/common"),Navagator=require("js/Navagator"),NavMenu=require("js/NavMenu"),Bottom=require("js/Bottom"),Toolbar=require("js/Toolbar"),Alert=require("js/Alert"),Pay_complition=React.createClass({displayName:"Pay_complition",showAlert:function(){$(this.refs.myModal).modal()},submit:function(){var me=this;$.ajax({type:"POST",url:common.createUrl($(".htmlbody").attr("data-ajax-submit")),data:{dataOrderNum:me.state.dataOrderNum},beforeSend:function(){$(".makesureDesigner").loadingOverlay()},success:function(data){$(".makesureDesigner").loadingOverlay("remove"),data.success?window.location.href="makesureOrder.html":(me.setState({title:"错误",message:data.msg}),me.showAlert())},error:function(XMLHttpRequest,textStatus){$(".makesureDesigner").loadingOverlay("remove"),me.setState({title:textStatus,message:JSON.stringify(XMLHttpRequest)}),me.showAlert()},dataType:"json"})},componentDidMount:function(){$("input[name='payTypeRadios'][checked]")||$("input[name='payTypeRadios']")[0].attr("checked",!0)},getInitialState:function(){var dataOrder=JSON.parse($(".htmlbody").attr("data-order"));return{title:"消息",message:"...",dataOrder:dataOrder}},render:function(){var me=this,dataBreadcrumb=JSON.parse($(".htmlbody").attr("data-breadcrumb")),breadcrumbDom=[];$.each(dataBreadcrumb,function(index,item){var cls="";return index==dataBreadcrumb.length-1?(breadcrumbDom.push(React.createElement("li",{className:"leaf"},item.name)),!1):void breadcrumbDom.push(React.createElement("li",null,React.createElement("a",{href:item.link,className:cls},item.name)))});var payment=me.state.dataOrder.payment,paymentDOM=[];return $.each(payment,function(index,pay){paymentDOM.push(React.createElement("div",{className:"radio inline-block"},React.createElement("label",null,React.createElement("input",{type:"radio",name:"payTypeRadios",value:pay.payment_code}),React.createElement("img",{src:pay.payment_image,alt:pay.payment_name}))))}),React.createElement("div",null,React.createElement(Navagator,null),React.createElement(NavMenu,{"data-index":"4"}),React.createElement("div",{className:"container pay_complition"},React.createElement("ol",{className:"breadcrumb"},breadcrumbDom),React.createElement("div",{className:"noti"},"当前订单状态：支付尾款"),React.createElement("div",{className:"content"},"订单内容：",me.state.dataOrder.title,"剩余尾款 应付金额：￥",me.state.dataOrder.price,"元 请选择支付方式：",React.createElement("div",null,paymentDOM),React.createElement("button",{className:"btn btn-base btn-submit",onClick:me.submit},"确认设计图并支付尾款"))),React.createElement(Bottom,null),React.createElement(Toolbar,null),React.createElement("div",{className:"modal fade",ref:"myModal",tabIndex:"-1",role:"dialog"},React.createElement(Alert,{title:this.state.title,message:this.state.message})))}});$(function(){ReactDOM.render(React.createElement(Pay_complition,null),$(".htmlbody").get(0))})});